"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[1348],{3905:(e,n,r)=>{r.d(n,{Zo:()=>k,kt:()=>s});var t=r(7294);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function l(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function o(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?l(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function i(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},l=Object.keys(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)r=l[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=t.createContext({}),u=function(e){var n=t.useContext(c),r=n;return e&&(r="function"==typeof e?e(n):o(o({},n),e)),r},k=function(e){var n=u(e.components);return t.createElement(c.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,l=e.originalType,c=e.parentName,k=i(e,["components","mdxType","originalType","parentName"]),d=u(r),s=a,b=d["".concat(c,".").concat(s)]||d[s]||p[s]||l;return r?t.createElement(b,o(o({ref:n},k),{},{components:r})):t.createElement(b,o({ref:n},k))}));function s(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=r.length,o=new Array(l);o[0]=d;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var u=2;u<l;u++)o[u]=r[u];return t.createElement.apply(null,o)}return t.createElement.apply(null,r)}d.displayName="MDXCreateElement"},7883:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>u});var t=r(7462),a=(r(7294),r(3905));const l={sidebar_label:"Build Debian with debos-radxa",sidebar_position:8},o="Rockchip Debian SDK",i={unversionedId:"rock5/rock5b/advanced/debos_debian",id:"rock5/rock5b/advanced/debos_debian",title:"Rockchip Debian SDK",description:"\u51c6\u5907",source:"@site/docs/rock5/rock5b/advanced/debos_debian.md",sourceDirName:"rock5/rock5b/advanced",slug:"/rock5/rock5b/advanced/debos_debian",permalink:"/rock5/rock5b/advanced/debos_debian",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rock5/rock5b/advanced/debos_debian.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_label:"Build Debian with debos-radxa",sidebar_position:8},sidebar:"tutorialSidebar",previous:{title:"Build U-boot for ROCK 5B",permalink:"/rock5/rock5b/advanced/build_uboot"},next:{title:"RockChip MPP Multimedia Guide",permalink:"/rock5/rock5b/advanced/rockchip_mpp"}},c={},u=[{value:"\u51c6\u5907",id:"\u51c6\u5907",level:2},{value:"\u83b7\u53d6\u6e90\u4ee3\u7801",id:"\u83b7\u53d6\u6e90\u4ee3\u7801",level:3},{value:"\u4ecb\u7ecd",id:"\u4ecb\u7ecd",level:3},{value:"\u5b89\u88c5\u5de5\u5177\u94fe",id:"\u5b89\u88c5\u5de5\u5177\u94fe",level:3},{value:"\u6784\u5efau-boot",id:"\u6784\u5efau-boot",level:2},{value:"\u5199\u5165u-boot",id:"\u5199\u5165u-boot",level:2},{value:"\u6784\u5efa\u5185\u6838Kernel",id:"\u6784\u5efa\u5185\u6838kernel",level:2},{value:"\u66f4\u6539\u5185\u6838\u914d\u7f6e",id:"\u66f4\u6539\u5185\u6838\u914d\u7f6e",level:3},{value:"\u6784\u5efa\u5185\u6838deb\u5305",id:"\u6784\u5efa\u5185\u6838deb\u5305",level:2},{value:"\u751f\u6210\u7cfb\u7edf\u955c\u50cfimage",id:"\u751f\u6210\u7cfb\u7edf\u955c\u50cfimage",level:2}],k={toc:u};function p(e){let{components:n,...r}=e;return(0,a.kt)("wrapper",(0,t.Z)({},k,r,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"rockchip-debian-sdk"},"Rockchip Debian SDK"),(0,a.kt)("h2",{id:"\u51c6\u5907"},"\u51c6\u5907"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u51c6\u5907ROCK 5B")),(0,a.kt)("h3",{id:"\u83b7\u53d6\u6e90\u4ee3\u7801"},"\u83b7\u53d6\u6e90\u4ee3\u7801"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u60a8\u9700\u8981 Git \u83b7\u53d6\u591a\u4e2a git \u5b58\u50a8\u5e93\u6765\u6784\u5efa\u6620\u50cf\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo apt-get update\nsudo apt-get install git\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u514b\u9686\u6e90\u4ee3\u7801")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"mkdir ~/rk3588-sdk && cd ~/rk3588-sdk\ngit clone -b stable-5.10-rock5 https://github.com/radxa/u-boot.git\ngit clone -b stable-5.10-rock5 https://github.com/radxa/kernel.git\ngit clone -b master https://github.com/radxa/rkbin.git\ngit clone -b debian https://github.com/radxa/build.git\ngit clone -b main https://github.com/radxa/debos-radxa.git\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f60\u5c06\u5f97\u5230\u4ee5\u4e0b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"build  kernel  rkbin u-boot\n")),(0,a.kt)("h3",{id:"\u4ecb\u7ecd"},"\u4ecb\u7ecd"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"build\uff1a \u7528\u4e8e\u6784\u5efau-boot\u3001\u5185\u6838\u548crootfs \u7684\u4e00\u4e9b\u811a\u672c\u6587\u4ef6\u548c\u914d\u7f6e\u6587\u4ef6\u3002"),(0,a.kt)("li",{parentName:"ul"},"kernel\uff1a\u5185\u6838\u6e90\u4ee3\u7801\uff0c\u5f53\u524d\u7248\u672c\u4e3a4.19.193\u3002"),(0,a.kt)("li",{parentName:"ul"},"rkbin\uff1a \u9884\u6784\u5efa\u7684 Rockchip \u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5305\u62ec\u7b2c\u4e00\u9636\u6bb5loader\u548c ATF\uff08Arm Trustzone \u56fa\u4ef6\uff09\u3002"),(0,a.kt)("li",{parentName:"ul"},"u-boot\uff1a u-boot \u4f5c\u4e3a\u7b2c\u4e8c\u9636\u6bb5bootloader\u3002")),(0,a.kt)("h3",{id:"\u5b89\u88c5\u5de5\u5177\u94fe"},"\u5b89\u88c5\u5de5\u5177\u94fe"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"wget https://dl.radxa.com/tools/linux/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu.tar.gz\nsudo tar zxvf gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu.tar.gz -C /usr/local/\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5c06\u4ee5\u4e0b\u884c\u6dfb\u52a0\u5230\u6587\u4ef6\u672b\u5c3e ~/.bashrc")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'export PATH="/usr/local/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu/linux-x86/aarch64/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu/bin:$PATH"\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u91cd\u7f6e~/.bashrc")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"source ~/.bashrc\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u68c0\u67e5toolchain\u7248\u672c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"radxa@x86-64:~$ which aarch64-none-linux-gnu-gcc\n/usr/local/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu/linux-x86/aarch64/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu/bin/aarch64-none-linux-gnu-gcc\n\nradxa@x86-64:~$ aarch64-none-linux-gnu-gcc -v\nUsing built-in specs.\nCOLLECT_GCC=aarch64-none-linux-gnu-gcc\nCOLLECT_LTO_WRAPPER=/usr/local/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu/linux-x86/aarch64/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu/bin/../libexec/gcc/aarch64-none-linux-gnu/10.3.1/lto-wrapper\nTarget: aarch64-none-linux-gnu\nConfigured with: /data/jenkins/workspace/GNU-toolchain/arm-10/src/gcc/configure --target=aarch64-none-linux-gnu --prefix= --with-sysroot=/aarch64-none-linux-gnu/libc --with-build-sysroot=/data/jenkins/workspace/GNU-toolchain/arm-10/build-aarch64-none-linux-gnu/install//aarch64-none-linux-gnu/libc --with-bugurl=https://bugs.linaro.org/ --enable-gnu-indirect-function --enable-shared --disable-libssp --disable-libmudflap --enable-checking=release --enable-languages=c,c++,fortran --with-gmp=/data/jenkins/workspace/GNU-toolchain/arm-10/build-aarch64-none-linux-gnu/host-tools --with-mpfr=/data/jenkins/workspace/GNU-toolchain/arm-10/build-aarch64-none-linux-gnu/host-tools --with-mpc=/data/jenkins/workspace/GNU-toolchain/arm-10/build-aarch64-none-linux-gnu/host-tools --with-isl=/data/jenkins/workspace/GNU-toolchain/arm-10/build-aarch64-none-linux-gnu/host-tools --enable-fix-cortex-a53-843419 --with-pkgversion='GNU Toolchain for the A-profile Architecture 10.3-2021.07 (arm-10.29)'\nThread model: posix\nSupported LTO compression algorithms: zlib\ngcc version 10.3.1 20210621 (GNU Toolchain for the A-profile Architecture 10.3-2021.07 (arm-10.29))\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5b89\u88c5\u5176\u4f59\u5de5\u5177")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo apt-get install device-tree-compiler libncurses5 libncurses5-dev build-essential libssl-dev mtools bc python dosfstools\n")),(0,a.kt)("h2",{id:"\u6784\u5efau-boot"},"\u6784\u5efau-boot"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u9700\u8981\u68c0\u67e5\u5206\u652f stable-5.10-rock5\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u4f7f\u7528\u9ed8\u8ba4\u7684 rock-5b-rk3588_defconfig \u6784\u5efa u-boot\u3002"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"cd ~/rk3588-sdk\n./build/mk-uboot.sh rk3588-rock-5b # For ROCK 5B\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u751f\u6210\u7684images\u5c06\u88ab\u590d\u5236\u5230 out/u-boot \u6587\u4ef6\u5939")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"ls out/u-boot/\nidbloader.img rk3588_spl_loader_v1.07.111.bin spi u-boot.itb\n")),(0,a.kt)("h2",{id:"\u5199\u5165u-boot"},"\u5199\u5165u-boot"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5148\u68c0\u67e5out/u-boot \u4e2d\u7684\u6587\u4ef6\u5185\u5bb9\u662f\u5426\u4e0e\u5982\u4e0b\u4e00\u81f4\uff1a")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"ls out/u-boot/\nidbloader.img  rk3588_spl_loader_v1.07.111.bin  spi  u-boot.itb\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u70e7\u5f55 u-boot \u5230\u4f60\u7684\u5b58\u50a8\u4ecb\u8d28")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"sudo dd if=./idbloader.img of=/path/to/storage/device bs=512 seek=64\nsudo dd if=./u-boot.itb of=/path/to/storage/device bs=512 seek=16384\n")),(0,a.kt)("h2",{id:"\u6784\u5efa\u5185\u6838kernel"},"\u6784\u5efa\u5185\u6838Kernel"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u9700\u8981\u68c0\u67e5\u5206\u652f\u5230 stable-5.10-rock5\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u4f7f\u7528\u9ed8\u8ba4\u7684 rockchip_linux_defconfig \u6784\u5efa\u5185\u6838kernel\u3002"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"cd ~/rk3588-sdk\n./build/mk-kernel.sh rk3588-rock-5b #For ROCK 5B\n")),(0,a.kt)("h3",{id:"\u66f4\u6539\u5185\u6838\u914d\u7f6e"},"\u66f4\u6539\u5185\u6838\u914d\u7f6e"),(0,a.kt)("p",null,"\u53ef\u4ee5\u9009\u62e9\u6027\u66f4\u6539\u9ed8\u8ba4\u5185\u6838\u914d\u7f6e"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"cd ~/rk3588-sdk\ncd kernel\nexport ARCH=arm64\nexport CROSS_COMPILE=aarch64-none-linux-gnu-\nmake rockchip_linux_defconfig\nmake menuconfig\nmake savedefconfig\ncp defconfig arch/arm64/configs/rockchip_linux_defconfig\ncd ..\n./build/mk-kernel.sh rk3588-rock-5b    #For ROCK 5B\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u60a8\u5c06\u83b7\u5f97\u5185\u6838\u6620\u50cf\u548c dtb \u6587\u4ef6")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"ls out/kernel/\nImage  rk3588-rock-5b.dtb\n")),(0,a.kt)("h2",{id:"\u6784\u5efa\u5185\u6838deb\u5305"},"\u6784\u5efa\u5185\u6838deb\u5305"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5185\u6838\u5305\u6784\u5efa\u53ef\u4ee5\u5c06\u5185\u6838\u3001\u8bbe\u5907\u6811\u3001\u6a21\u5757\u548c\u56fa\u4ef6\u6253\u5305\u6210 Debian \u5305\uff0c\u8fd9\u4f7f\u5f97\u5728 ROCK 5B \u4e0a\u5b89\u88c5\u66f4\u5bb9\u6613\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"./build/pack-kernel.sh -d rockchip_linux_defconfig -r 10 # rockchip_linux_defconfig: kernel defconfig; 1: release number\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u751f\u6210\u7684\u5305\u5c06\u88ab\u590d\u5236\u5230 out/packages \u76ee\u5f55\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"ls out/packages/\nlinux-5.10.66-10-rockchip-ge5013df5e066_5.10.66-10-rockchip_arm64.changes\nlinux-image-5.10.66-10-rockchip-ge5013df5e066-dbg_5.10.66-10-rockchip_arm64.deb\nlinux-headers-5.10.66-10-rockchip-ge5013df5e066_5.10.66-10-rockchip_arm64.deb\nlinux-libc-dev_5.10.66-10-rockchip_arm64.deb\nlinux-image-5.10.66-10-rockchip-ge5013df5e066_5.10.66-10-rockchip_arm64.deb\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5f53\u60a8\u60f3\u8981\u5c06\u6307\u5b9a\u7684\u5185\u6838\u5305\u5b89\u88c5\u5230\u60a8\u7684\u64cd\u4f5c\u7cfb\u7edf\u65f6\uff0c\u8bf7\u5c1d\u8bd5\u4ee5\u4e0b\u6b65\u9aa4\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5c06 linux-image-5.10.66-10-rockchip-ge5013df5e066-dbg_5.10.66-10-rockchip_arm64.deb \u590d\u5236\u5230\u60a8\u7684 ROCK 5B\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u5c06\u5b83\u4eec\u5b89\u88c5\u5728 ROCK 5 \u4e0a\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"# dpkg -i linux-image-5.10.66-10-rockchip-ge5013df5e066-dbg_5.10.66-10-rockchip_arm64.deb\n")),(0,a.kt)("h2",{id:"\u751f\u6210\u7cfb\u7edf\u955c\u50cfimage"},"\u751f\u6210\u7cfb\u7edf\u955c\u50cfimage"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5220\u9664\u65e7\u7684 ROCK 5B U-boot \u548c\u5185\u6838\u5305\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ cd ~/rk3588-sdk/debos-radxa\n\n$ ls rootfs/packages/arm64/kernel/*5.10.66*\nrootfs/packages/arm64/kernel/linux-headers-5.10.66-6-rockchip-gbb60f4aeba31_5.10.66-6-rockchip_arm64.deb\nrootfs/packages/arm64/kernel/linux-image-5.10.66-6-rockchip-gbb60f4aeba31_5.10.66-6-rockchip_arm64.deb\n\n$ ls rootfs/packages/arm64/u-boot/rock-5b*\nrootfs/packages/arm64/u-boot/rock-5b-rk-ubootimg_2017.09-g592fa62ffe2-220419_all.deb\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u5c06\u65b0\u7684 ROCK 5B U-boot \u548c Kernel \u5305\u590d\u5236\u5230\u6307\u5b9a\u4f4d\u7f6e\u3002 ")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u6bd4\u5982 Kernel packages \u5728 rootfs/packages/arm64/kernel/ \u548c U-boot \u5728 rootfs/packages/arm64/u-boot\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u8bbe\u7f6eDocker"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"$ cd ~/rk3588-sdk/debos-radxa\n$ ./docker/dev-shell\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5728 Docker \u5bb9\u5668\u4e2d\u6784\u5efa\u955c\u50cfimage\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"# ./build.sh -c rk3588 -b rock-5b -m debian -d bullseye -v xfce4 -a arm64 -f gpt\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u751f\u6210\u7684\u7cfb\u7edf\u955c\u50cfsystem images\u4f1a\u88ab\u590d\u5236\u5230~/rk3588-sdk/debos-radxa/output \u76ee\u5f55\u3002")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"\u6700\u540e\u70e7\u5f55\u955c\u50cf\u5373\u53ef\u3002Flash the image"))))}p.isMDXComponent=!0}}]);